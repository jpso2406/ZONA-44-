<!-- Promociones Section -->
<section class="promociones-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">{{ 'PROMOCIONES.TITLE' | translate }}</h2>
      <p class="section-subtitle">{{ 'PROMOCIONES.SUBTITLE' | translate }}</p>
    </div>
    
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <div class="loading-spinner"></div>
      <p>{{ 'PROMOCIONES.LOADING' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <p>{{ error }}</p>
        <button class="btn-retry" (click)="loadPromociones()">
          <i class="fas fa-redo"></i>
          {{ 'PROMOCIONES.RETRY' | translate }}
        </button>
      </div>
    </div>

    <!-- Authentication Notice (Solo cuando se intenta comprar sin login) -->
    <div *ngIf="showAuthModal" class="auth-modal-overlay" (click)="closeAuthModal()">
      <div class="auth-modal" (click)="$event.stopPropagation()">
        <button class="close-modal" (click)="closeAuthModal()">
          <i class="fas fa-times"></i>
        </button>
        <div class="auth-message">
          <i class="fas fa-user-lock"></i>
          <h3>Para comprar una promoción</h3>
          <p>Debes iniciar sesión o crear una cuenta para poder agregar promociones al carrito</p>
          <div class="auth-buttons">
            <button class="btn-login" (click)="navigateToLogin()">
              <i class="fas fa-sign-in-alt"></i>
              Iniciar Sesión
            </button>
            <button class="btn-register" (click)="navigateToRegister()">
              <i class="fas fa-user-plus"></i>
              Crear Cuenta
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Promociones Grid (Siempre visible) -->
    <div *ngIf="!loading && !error" class="promociones-grid">
      <!-- Empty State -->
      <div *ngIf="promociones.length === 0" class="empty-state">
        <i class="fas fa-tags"></i>
        <h3>{{ 'PROMOCIONES.NO_PROMOTIONS' | translate }}</h3>
        <p>{{ 'PROMOCIONES.NO_PROMOTIONS_DESC' | translate }}</p>
      </div>

      <!-- Promociones Cards -->
      <div class="promo-card" *ngFor="let promo of promociones; trackBy: trackByPromoId">
        <div class="promo-image">
          <img [src]="promo.image" [alt]="promo.title" (error)="onImageError($event)">
          <div class="promo-badge" *ngIf="promo.isNew">
            <span>{{ 'PROMOCIONES.NEW' | translate }}</span>
          </div>
          <div class="promo-discount" *ngIf="promo.discount">
            <span>-{{ promo.discount }}%</span>
          </div>
        </div>
        
        <div class="promo-content">
          <h3 class="promo-title">{{ promo.title }}</h3>
          <p class="promo-description">{{ promo.description }}</p>
          
          <div class="promo-pricing">
            <span class="promo-old-price" *ngIf="promo.oldPrice">${{ promo.oldPrice | number:'1.2-2' }}</span>
            <span class="promo-new-price">${{ promo.newPrice | number:'1.2-2' }}</span>
          </div>
          
          <div class="promo-validity" *ngIf="promo.validUntil">
            <i class="fas fa-clock"></i>
            <span>{{ 'PROMOCIONES.VALID_UNTIL' | translate }}: {{ promo.validUntil | date:'shortDate' }}</span>
          </div>
          
          <button class="btn-promo" (click)="selectPromo(promo)" [disabled]="loading">
            <i class="fas fa-shopping-cart"></i>
            <span>{{ 'PROMOCIONES.ORDER_NOW' | translate }}</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>