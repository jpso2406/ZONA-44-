<div class="dashboard-orders">
  <div class="page-header mb-4">
    <h1>Gestión de Pedidos</h1>
    <p>Administra y actualiza el estado de los pedidos realizados por los clientes.</p>
  </div>
  <div class="orders-section">
    <% if @orders.any? %>
      <table class="table table-hover table-bordered">
        <thead class="table-light">
          <tr>
            <th>Número</th>
            <th>Cliente</th>
            <th>Total</th>
            <th>Estado</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% @orders.each do |order| %>
            <tr>
              <td><%= order.order_number %></td>
              <td><%= order.customer_name %></td>
              <td>$<%= number_with_precision(order.total_amount, precision: 0) %></td>
              <td>
                <span class="badge <%= order.status == 'processing' ? 'bg-warning text-dark' : order.status == 'paid' ? 'bg-success' : 'bg-secondary' %>">
                  <%= order.status == 'processing' ? 'En proceso' : order.status == 'paid' ? 'Finalizado' : (order.status ? order.status.humanize : 'Pendiente') %>
                </span>
              </td>
              <td><%= order.created_at.strftime('%d/%m/%Y %H:%M') %></td>
              <td>
                <%= link_to 'Ver', dashboard_order_path(order), class: 'btn btn-sm btn-primary' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="alert alert-info">No hay pedidos registrados.</div>
    <% end %>
  </div>
</div>
