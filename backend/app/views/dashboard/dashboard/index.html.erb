<!-- app/views/admin/dashboard.html.erb -->
  <div class="row g-4">
        <!-- filepath: /workspaces/backend/app/views/dashboard/dashboard/index.html.erb -->
    <div class="container-fluid">
      <div class="row mb-4">
        <div class="col-md-6 d-flex flex-column align-items-center">
          <h4 class="mb-3">游늵 Ventas por D칤a</h4>
          <div class="chart-container">
            <canvas id="ventasPorDiaChart"></canvas>
          </div>
        </div>
        <div class="col-md-6 d-flex flex-column align-items-center">
          <h4 class="mb-3">游늳 Ventas por Mes</h4>
          <div class="chart-container">
            <canvas id="ventasPorMesChart"></canvas>
          </div>
        </div>
      </div>
      <div class="row mb-4">
        <div class="col-md-6 d-flex flex-column align-items-center">
          <h4 class="mb-3">游꿢 Ventas por A침o</h4>
          <div class="chart-container">
            <canvas id="ventasPorAnoChart"></canvas>
          </div>
        </div>
        <div class="col-md-6 d-flex flex-column align-items-center">
          <h4 class="mb-3">游끥 Productos M치s Vendidos</h4>
          <div class="chart-container">
            <canvas id="productosMasVendidosChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <style>
    .chart-container {
      width: 100%;
      max-width: 450px;
      height: 350px;
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      padding: 24px 16px 8px 16px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease-in-out;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .chart-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 16px 40px rgba(0,0,0,0.15);
    }
    canvas {
      width: 100% !important;
      height: 300px !important;
    }
    h4 {
      color: #000000;
      font-weight: 700;
      text-align: center;
      font-size: 1.25rem;
      letter-spacing: -0.025em;
      margin-bottom: 1rem;
    }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // --- CONFIGURACI칍N GLOBAL ---
      Chart.defaults.font.family = "'Inter', 'Segoe UI', 'Roboto', sans-serif";
      Chart.defaults.font.size = 14;
      Chart.defaults.color = '#374151';
      Chart.defaults.plugins.legend.labels.boxWidth = 15;
      Chart.defaults.plugins.legend.labels.padding = 20;

      // Paleta de colores vibrante y uniforme
      const palette = {
        primary: {
          main: '#6366f1',     // 칈ndigo vibrante
          light: '#a5b4fc',
          gradient: 'linear-gradient(135deg, #6366f1, #8b5cf6)'
        },
        secondary: {
          main: '#06b6d4',     // Cyan
          light: '#67e8f9',
          gradient: 'linear-gradient(135deg, #06b6d4, #3b82f6)'
        },
        accent: {
          main: '#ec4899',     // Rosa vibrante
          light: '#f9a8d4',
          gradient: 'linear-gradient(135deg, #ec4899, #f43f5e)'
        },
        success: {
          main: '#10b981',     // Esmeralda
          light: '#6ee7b7',
          gradient: 'linear-gradient(135deg, #10b981, #059669)'
        },
        warning: {
          main: '#f59e0b',     // 츼mbar
          light: '#fcd34d',
          gradient: 'linear-gradient(135deg, #f59e0b, #d97706)'
        },
        colors: [
          '#6366f1', '#06b6d4', '#ec4899', '#10b981', '#f59e0b', 
          '#8b5cf6', '#3b82f6', '#f43f5e', '#059669', '#d97706'
        ]
      };

      const tooltipStyles = {
        backgroundColor: 'rgba(255,255,255,0.95)',
        titleColor: '#1f2937',
        bodyColor: '#374151',
        borderColor: '#e5e7eb',
        borderWidth: 2,
        padding: 12,
        cornerRadius: 12,
        displayColors: true,
        boxPadding: 6,
        titleFont: { size: 14, weight: 'bold' },
        bodyFont: { size: 13 }
      };

      // 1. Ventas por D칤a (Barras con gradiente)
      const ventasDiaCtx = document.getElementById('ventasPorDiaChart').getContext('2d');
      const gradientBar = ventasDiaCtx.createLinearGradient(0, 0, 0, 300);
      gradientBar.addColorStop(0, palette.primary.main);
      gradientBar.addColorStop(1, palette.primary.light);

      new Chart(ventasDiaCtx, {
        type: 'bar',
        data: {
          labels: <%= raw @labels_dia.to_json %>,
          datasets: [{
            label: 'Ventas Diarias',
            data: <%= raw @data_dia.to_json %>,
            backgroundColor: gradientBar,
            borderColor: palette.primary.main,
            borderWidth: 2,
            borderRadius: 12,
            borderSkipped: false,
            hoverBackgroundColor: palette.secondary.main,
            hoverBorderColor: palette.secondary.main
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: tooltipStyles
          },
          scales: {
            y: { 
              beginAtZero: true, 
              grid: { color: "#f1f5f9", drawBorder: false },
              ticks: { color: '#6b7280' }
            },
            x: { 
              grid: { display: false },
              ticks: { color: '#6b7280' }
            }
          },
          animation: {
            duration: 1500,
            easing: 'easeInOutCubic'
          }
        }
      });

      // 2. Ventas por Mes (L칤nea con gradiente)
      const ventasMesCtx = document.getElementById('ventasPorMesChart').getContext('2d');
      const gradientLine = ventasMesCtx.createLinearGradient(0, 0, 0, 300);
      gradientLine.addColorStop(0, palette.secondary.main + '80');
      gradientLine.addColorStop(1, palette.secondary.main + '10');

      new Chart(ventasMesCtx, {
        type: 'line',
        data: {
          labels: <%= raw @labels_mes.to_json %>,
          datasets: [{
            label: 'Ventas Mensuales',
            data: <%= raw @data_mes.to_json %>,
            backgroundColor: gradientLine,
            borderColor: palette.secondary.main,
            pointBackgroundColor: '#ffffff',
            pointBorderColor: palette.secondary.main,
            pointBorderWidth: 3,
            pointRadius: 6,
            pointHoverRadius: 8,
            pointHoverBackgroundColor: palette.accent.main,
            fill: true,
            tension: 0.4,
            borderWidth: 4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: tooltipStyles
          },
          scales: {
            y: { 
              beginAtZero: true, 
              grid: { color: "#f1f5f9", drawBorder: false },
              ticks: { color: '#6b7280' }
            },
            x: { 
              grid: { display: false },
              ticks: { color: '#6b7280' }
            }
          },
          animation: {
            duration: 2000,
            easing: 'easeInOutCubic'
          }
        }
      });

      // 3. Ventas por A침o (Dona moderna)
      const ventasAnoCtx = document.getElementById('ventasPorAnoChart').getContext('2d');
      
      new Chart(ventasAnoCtx, {
        type: 'doughnut',
        data: {
          labels: <%= raw @labels_ano.to_json %>,
          datasets: [{
            label: 'Ventas Anuales',
            data: <%= raw @data_ano.to_json %>,
            backgroundColor: palette.colors.slice(0, 5),
            borderColor: "#ffffff",
            borderWidth: 5,
            hoverOffset: 15,
            hoverBorderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          cutout: '65%',
          plugins: {
            legend: { 
              position: 'bottom',
              align: 'center',
              labels: {
                padding: 15,
                usePointStyle: true,
                pointStyle: 'circle',
                font: { size: 12 }
              }
            },
            tooltip: tooltipStyles
          },
          animation: {
            duration: 1800,
            easing: 'easeOutBounce'
          }
        }
      });

      // 4. Productos m치s vendidos (Barras horizontales coloridas)
      const productosCtx = document.getElementById('productosMasVendidosChart').getContext('2d');
      
      // Crear gradiente para productos m치s vendidos
      const gradientProductos = productosCtx.createLinearGradient(0, 0, 300, 0);
      gradientProductos.addColorStop(0, palette.primary.main);
      gradientProductos.addColorStop(1, palette.primary.light);

      new Chart(productosCtx, {
        type: 'bar',
        data: {
          labels: <%= raw @labels_productos.to_json %>,
          datasets: [{
            label: 'Cantidad Vendida',
            data: <%= raw @data_productos.to_json %>,
            backgroundColor: gradientProductos,
            borderColor: palette.primary.main,
            borderWidth: 2,
            borderRadius: 10,
            borderSkipped: false,
            hoverBackgroundColor: palette.secondary.main,
            hoverBorderColor: palette.secondary.main
          }]
        },
        options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
            tooltip: tooltipStyles
          },
          scales: {
            y: { 
              grid: { display: false },
              ticks: { color: '#6b7280' }
            },
            x: { 
              beginAtZero: true,
              grid: { color: "#f1f5f9", drawBorder: false },
              ticks: { color: '#6b7280' }
            }
          },
          animation: {
            duration: 1600,
            easing: 'easeInOutQuart'
          }
        }
      });
    </script>
</div>
