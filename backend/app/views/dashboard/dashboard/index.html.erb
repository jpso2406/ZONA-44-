<!-- app/views/admin/dashboard.html.erb -->
<div class="row g-4">
    
    <div class="row">
      <div class="col-md-6">
        <h4>Ventas por Día (últimos 7 días)</h4>
        <canvas id="ventasPorDiaChart"></canvas>
     </div>

     <div class="col-md-6">
        <h4>Ventas por Mes (últimos 12 meses)</h4>
        <canvas id="ventasPorMesChart"></canvas>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-md-6">
        <h4>Ventas por Año</h4>
        <canvas id="ventasPorAnoChart"></canvas>
      </div>

      <div class="col-md-6">
        <h4>Productos más vendidos</h4>
        <canvas id="productosMasVendidosChart"></canvas>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Ventas por Día
      new Chart(document.getElementById('ventasPorDiaChart'), {
        type: 'bar',
        data: {
          labels: <%= raw @labels_dia.to_json %>,
          datasets: [{
            label: 'Ventas por Día',
            data: <%= raw @data_dia.to_json %>,
            backgroundColor: 'rgba(54, 162, 235, 0.6)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      // Ventas por Mes
      new Chart(document.getElementById('ventasPorMesChart'), {
        type: 'line',
        data: {
          labels: <%= raw @labels_mes.to_json %>,
          datasets: [{
            label: 'Ventas por Mes',
            data: <%= raw @data_mes.to_json %>,
            backgroundColor: 'rgba(153, 102, 255, 0.6)',
            borderColor: 'rgba(153, 102, 255, 1)',
            fill: true,
            borderWidth: 2
          }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });

      // Ventas por Año
      new Chart(document.getElementById('ventasPorAnoChart'), {
        type: 'pie',
        data: {
          labels: <%= raw @labels_ano.to_json %>,
          datasets: [{
            label: 'Ventas por Año',
            data: <%= raw @data_ano.to_json %>,
            backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF'],
            borderWidth: 1
          }]
        },
        options: { responsive: true }
      });

      // Productos más vendidos
      new Chart(document.getElementById('productosMasVendidosChart'), {
        type: 'bar',
        data: {
          labels: <%= raw @labels_productos.to_json %>,
          datasets: [{
            label: 'Cantidad Vendida',
            data: <%= raw @data_productos.to_json %>,
            backgroundColor: 'rgba(255, 159, 64, 0.6)',
            borderColor: 'rgba(255, 159, 64, 1)',
            borderWidth: 1
          }]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
      });
    </script>



</div>
